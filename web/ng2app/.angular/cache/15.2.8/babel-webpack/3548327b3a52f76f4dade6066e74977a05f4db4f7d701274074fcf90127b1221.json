{"ast":null,"code":"import { Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/modal.service\";\nimport * as i2 from \"src/app/services/api.service\";\nimport * as i3 from \"@angular/forms\";\nconst _c0 = [\"modal\"];\nconst _c1 = [\"file\"];\nexport class ModalComponent {\n  constructor(modalService, apiService) {\n    this.modalService = modalService;\n    this.apiService = apiService;\n    this.model = {};\n    this.initTimeout = 100;\n    this.destroyTimeout = 300;\n    this.destroy$ = new Subject();\n  }\n  ngOnInit() {\n    this.model.name = '';\n    this.model.age = '';\n  }\n  ngAfterViewInit() {}\n  handleFileInput(file) {\n    const formData = new FormData();\n    formData.append('image', file.files[0], file.files[0].name);\n    this.apiService.post('file/upload-image', formData).subscribe(response => {});\n  }\n  handleFile() {\n    const formData = new FormData();\n    formData.append('file', this.fileInput.nativeElement.files[0], this.fileInput.nativeElement.files[0].name);\n  }\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n  initModal() {\n    this.modalService.toggleModal(this.modal, 'open');\n  }\n  destroyModal() {\n    this.modalService.toggleModal(this.modal, 'close');\n  }\n  submitModal(form) {\n    this.modalService.sendData(this.model);\n    form.reset();\n    this.destroyModal();\n  }\n}\nModalComponent.ɵfac = function ModalComponent_Factory(t) {\n  return new (t || ModalComponent)(i0.ɵɵdirectiveInject(i1.ModalService), i0.ɵɵdirectiveInject(i2.ApiService));\n};\nModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ModalComponent,\n  selectors: [[\"app-modal\"]],\n  viewQuery: function ModalComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modal = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.fileInput = _t.first);\n    }\n  },\n  decls: 17,\n  vars: 2,\n  consts: [[1, \"modal\"], [\"modal\", \"\"], [1, \"modal-wrapper\"], [1, \"modal-close\", 3, \"click\"], [1, \"modal-form\"], [\"myForm\", \"ngForm\"], [1, \"modal-file-input\"], [\"type\", \"file\", 3, \"change\"], [\"file\", \"\"], [1, \"modal-input\"], [\"name\", \"name\", \"type\", \"text\", 3, \"ngModel\", \"ngModelChange\"], [1, \"modal-button\"], [\"type\", \"submit\", 3, \"click\"]],\n  template: function ModalComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r3 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"div\", 0, 1)(2, \"div\", 2)(3, \"div\", 3);\n      i0.ɵɵlistener(\"click\", function ModalComponent_Template_div_click_3_listener() {\n        return ctx.destroyModal();\n      });\n      i0.ɵɵtext(4, \"\\u00D7\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"form\", 4, 5)(7, \"div\", 6)(8, \"input\", 7, 8);\n      i0.ɵɵlistener(\"change\", function ModalComponent_Template_input_change_8_listener($event) {\n        return ctx.handleFileInput($event.target);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"div\", 9)(11, \"input\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function ModalComponent_Template_input_ngModelChange_11_listener($event) {\n        return ctx.model.name = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"div\", 9)(13, \"input\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function ModalComponent_Template_input_ngModelChange_13_listener($event) {\n        return ctx.model.age = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(14, \"div\", 11)(15, \"button\", 12);\n      i0.ɵɵlistener(\"click\", function ModalComponent_Template_button_click_15_listener() {\n        i0.ɵɵrestoreView(_r3);\n        const _r1 = i0.ɵɵreference(6);\n        return i0.ɵɵresetView(ctx.submitModal(_r1));\n      });\n      i0.ɵɵtext(16, \"Submit\");\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngModel\", ctx.model.name);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.model.age);\n    }\n  },\n  dependencies: [i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.NgModel, i3.NgForm],\n  styles: [\".modal[_ngcontent-%COMP%] {\\n  position: fixed;\\n  left: 0;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  background-color: rgba(0, 0, 0, 0.6);\\n  display: none;\\n  opacity: 0;\\n  visibility: hidden;\\n  transition: all 0.3s ease;\\n  z-index: 999;\\n}\\n\\n.modal-init[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.modal-show[_ngcontent-%COMP%] {\\n  opacity: 1;\\n  visibility: visible;\\n}\\n\\n.modal-wrapper[_ngcontent-%COMP%] {\\n  position: relative;\\n  background-color: #ffffff;\\n  min-width: 240px;\\n  height: auto;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  padding: 20px 30px;\\n  border-radius: 4px;\\n}\\n\\n.modal-close[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  position: absolute;\\n  top: -8px;\\n  right: -8px;\\n  width: 14px;\\n  height: 14px;\\n  background-color: #000000;\\n  border: 2px solid #000000;\\n  border-radius: 50%;\\n  padding: 4px;\\n  color: #ffffff;\\n  font-size: 18px;\\n  font-weight: 500;\\n  cursor: pointer;\\n}\\n\\n.modal-form[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  width: 100%;\\n  margin-top: 24px;\\n  gap: 14px;\\n}\\n\\n.modal-input[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\\n\\n.modal-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  width: inherit;\\n  outline: none;\\n  border: 2px solid #000000;\\n  border-radius: 4px;\\n  padding: 4px 0;\\n}\\n\\n.modal-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  background-color: #000000;\\n  border: 1px solid #000000;\\n  border-radius: 4px;\\n  color: #ffffff;\\n  padding: 4px 24px;\\n  cursor: pointer;\\n  font-size: 14px;\\n  box-sizing: border-box;\\n  transition: all 0.3s ease;\\n}\\n\\n.modal-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\\n  background-color: #ffffff;\\n  color: #000000;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9zaGFyZWQvbW9kYWwvbW9kYWwuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxlQUFBO0VBQ0EsT0FBQTtFQUNBLE1BQUE7RUFDQSxRQUFBO0VBQ0EsU0FBQTtFQUNBLG9DQUFBO0VBQ0EsYUFBQTtFQUNBLFVBQUE7RUFDQSxrQkFBQTtFQUNBLHlCQUFBO0VBQ0EsWUFBQTtBQUNKOztBQUVBO0VBQ0ksYUFBQTtFQUNBLG1CQUFBO0VBQ0EsdUJBQUE7QUFDSjs7QUFFQTtFQUNJLFVBQUE7RUFDQSxtQkFBQTtBQUNKOztBQUVBO0VBQ0ksa0JBQUE7RUFDQSx5QkFBQTtFQUNBLGdCQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0VBQ0Esa0JBQUE7RUFDQSxrQkFBQTtBQUNKOztBQUVBO0VBQ0ksYUFBQTtFQUNBLG1CQUFBO0VBQ0EsdUJBQUE7RUFDQSxrQkFBQTtFQUNBLFNBQUE7RUFDQSxXQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSx5QkFBQTtFQUNBLHlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtFQUNBLGVBQUE7RUFDQSxnQkFBQTtFQUNBLGVBQUE7QUFDSjs7QUFFQTtFQUNJLGFBQUE7RUFDQSxzQkFBQTtFQUNBLG1CQUFBO0VBQ0EsdUJBQUE7RUFDQSxXQUFBO0VBQ0EsZ0JBQUE7RUFDQSxTQUFBO0FBQ0o7O0FBRUE7RUFDSSxXQUFBO0FBQ0o7O0FBRUE7RUFDSSxjQUFBO0VBQ0EsYUFBQTtFQUNBLHlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxjQUFBO0FBQ0o7O0FBTUE7RUFDSSx5QkFBQTtFQUNBLHlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxjQUFBO0VBQ0EsaUJBQUE7RUFDQSxlQUFBO0VBQ0EsZUFBQTtFQUNBLHNCQUFBO0VBQ0EseUJBQUE7QUFISjs7QUFNQTtFQUNJLHlCQUFBO0VBQ0EsY0FBQTtBQUhKIiwic291cmNlc0NvbnRlbnQiOlsiLm1vZGFsIHtcbiAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgbGVmdDogMDtcbiAgICB0b3A6IDA7XG4gICAgcmlnaHQ6IDA7XG4gICAgYm90dG9tOiAwO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC42KTtcbiAgICBkaXNwbGF5OiBub25lO1xuICAgIG9wYWNpdHk6IDA7XG4gICAgdmlzaWJpbGl0eTogaGlkZGVuO1xuICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7XG4gICAgei1pbmRleDogOTk5O1xufVxuXG4ubW9kYWwtaW5pdCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xufVxuXG4ubW9kYWwtc2hvdyB7XG4gICAgb3BhY2l0eTogMTtcbiAgICB2aXNpYmlsaXR5OiB2aXNpYmxlO1xufVxuXG4ubW9kYWwtd3JhcHBlciB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7XG4gICAgbWluLXdpZHRoOiAyNDBweDtcbiAgICBoZWlnaHQ6IGF1dG87XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIHBhZGRpbmc6IDIwcHggMzBweDtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG59XG5cbi5tb2RhbC1jbG9zZSB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IC04cHg7XG4gICAgcmlnaHQ6IC04cHg7XG4gICAgd2lkdGg6IDE0cHg7XG4gICAgaGVpZ2h0OiAxNHB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDAwMDA7XG4gICAgYm9yZGVyOiAycHggc29saWQgIzAwMDAwMDtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgcGFkZGluZzogNHB4O1xuICAgIGNvbG9yOiAjZmZmZmZmO1xuICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLm1vZGFsLWZvcm0ge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIG1hcmdpbi10b3A6IDI0cHg7XG4gICAgZ2FwOiAxNHB4O1xufVxuXG4ubW9kYWwtaW5wdXQge1xuICAgIHdpZHRoOiAxMDAlO1xufVxuXG4ubW9kYWwtaW5wdXQgaW5wdXQge1xuICAgIHdpZHRoOiBpbmhlcml0O1xuICAgIG91dGxpbmU6IG5vbmU7XG4gICAgYm9yZGVyOiAycHggc29saWQgIzAwMDAwMDtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgcGFkZGluZzogNHB4IDA7XG59XG5cbi5tb2RhbC1idXR0b24ge1xuXG59XG5cbi5tb2RhbC1idXR0b24gYnV0dG9uIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwMDAwO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICMwMDAwMDA7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIGNvbG9yOiAjZmZmZmZmO1xuICAgIHBhZGRpbmc6IDRweCAyNHB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlO1xufVxuXG4ubW9kYWwtYnV0dG9uIGJ1dHRvbjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjtcbiAgICBjb2xvcjogIzAwMDAwMDtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"AAIA,SAASA,OAAO,QAA6D,MAAM;;;;;;;AASnF,OAAM,MAAOC,cAAc;EAUzBC,YAAoBC,YAA0B,EAAUC,UAAsB;IAA1D,iBAAY,GAAZD,YAAY;IAAwB,eAAU,GAAVC,UAAU;IAR3D,UAAK,GAAQ,EAAE;IACf,gBAAW,GAAW,GAAG;IACzB,mBAAc,GAAW,GAAG;IAI3B,aAAQ,GAAG,IAAIJ,OAAO,EAAQ;EAE2C;EAGjFK,QAAQ;IACN,IAAI,CAACC,KAAK,CAACC,IAAI,GAAG,EAAE;IACpB,IAAI,CAACD,KAAK,CAACE,GAAG,GAAG,EAAE;EACrB;EAEAC,eAAe,IACf;EAEAC,eAAe,CAACC,IAAS;IACvB,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,EAAE;IAC/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEH,IAAI,CAACI,KAAK,CAAC,CAAC,CAAC,EAAEJ,IAAI,CAACI,KAAK,CAAC,CAAC,CAAC,CAACR,IAAI,CAAC;IAC3D,IAAI,CAACH,UAAU,CAACY,IAAI,CAAC,mBAAmB,EAAEJ,QAAQ,CAAC,CAACK,SAAS,CAAEC,QAAa,IAAI,CAEhF,CAAC,CAAC;EACJ;EACAC,UAAU;IACR,MAAMP,QAAQ,GAAa,IAAIC,QAAQ,EAAE;IACzCD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE,IAAI,CAACM,SAAS,CAACC,aAAa,CAACN,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAACK,SAAS,CAACC,aAAa,CAACN,KAAK,CAAC,CAAC,CAAC,CAACR,IAAI,CAAC;EAC5G;EAEAe,WAAW;IACT,IAAI,CAACC,QAAQ,CAACC,IAAI,EAAE;IACpB,IAAI,CAACD,QAAQ,CAACE,QAAQ,EAAE;EAC1B;EAEAC,SAAS;IACP,IAAI,CAACvB,YAAY,CAACwB,WAAW,CAAC,IAAI,CAACC,KAAK,EAAE,MAAM,CAAC;EACnD;EAEAC,YAAY;IACV,IAAI,CAAC1B,YAAY,CAACwB,WAAW,CAAC,IAAI,CAACC,KAAK,EAAE,OAAO,CAAC;EACpD;EAGAE,WAAW,CAACC,IAAY;IACtB,IAAI,CAAC5B,YAAY,CAAC6B,QAAQ,CAAC,IAAI,CAAC1B,KAAK,CAAC;IACtCyB,IAAI,CAACE,KAAK,EAAE;IACZ,IAAI,CAACJ,YAAY,EAAE;EACrB;;AAnDW5B,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;QAAdA,cAAc;EAAAiC;EAAAC;IAAA;;;;;;;;;;;;;;;;MCb3BC,iCAA0B;MAEbA;QAAA,OAASC,kBAAc;MAAA,EAAC;MAAqBD,sBAAO;MAAAA,iBAAM;MAC/DA,kCAA0C;MAEfA;QAAA,OAAUC,kCAA8B;MAAA,EAAC;MAA5DD,iBAAmE;MAEvEA,+BAAyB;MACFA;QAAA;MAAA,EAAwB;MAA3CA,iBAAwD;MAE5DA,+BAAyB;MACFA;QAAA;MAAA,EAAuB;MAA1CA,iBAAuD;MAE3DA,gCAA0B;MACdA;QAAAA;QAAA;QAAA,OAASA,mCAAmB;MAAA,EAAC;MAAeA,uBAAM;MAAAA,iBAAS;;;MANhDA,gBAAwB;MAAxBA,wCAAwB;MAGxBA,eAAuB;MAAvBA,uCAAuB","names":["Subject","ModalComponent","constructor","modalService","apiService","ngOnInit","model","name","age","ngAfterViewInit","handleFileInput","file","formData","FormData","append","files","post","subscribe","response","handleFile","fileInput","nativeElement","ngOnDestroy","destroy$","next","complete","initModal","toggleModal","modal","destroyModal","submitModal","form","sendData","reset","selectors","viewQuery","i0","ctx"],"sourceRoot":"","sources":["/home/dima/myProjects/heavyReviewBackEnd/web/ng2app/src/app/components/shared/modal/modal.component.ts","/home/dima/myProjects/heavyReviewBackEnd/web/ng2app/src/app/components/shared/modal/modal.component.html"],"sourcesContent":["import { formatDate } from '@angular/common';\nimport { HttpClient } from '@angular/common/http';\nimport { AfterViewInit, Component, ElementRef, OnChanges, OnInit, SimpleChanges, ViewChild } from '@angular/core';\nimport { NgForm} from '@angular/forms';\nimport { Subject, finalize, first, fromEvent, mergeMap, of, takeUntil } from 'rxjs';\nimport { ApiService } from 'src/app/services/api.service';\nimport { ModalService } from 'src/app/services/modal.service';\n\n@Component({\n  selector: 'app-modal',\n  templateUrl: './modal.component.html',\n  styleUrls: ['./modal.component.scss']\n})\nexport class ModalComponent implements OnInit, AfterViewInit {\n\n  public model: any = {};\n  public initTimeout: number = 100;\n  public destroyTimeout: number = 300;\n  @ViewChild('modal') modal!: ElementRef;\n  @ViewChild('file') fileInput!: ElementRef;\n\n  private destroy$ = new Subject<void>();\n\n  constructor(private modalService: ModalService, private apiService: ApiService) {}\n\n\n  ngOnInit(): void {\n    this.model.name = ''\n    this.model.age = ''\n  }\n  \n  ngAfterViewInit(): void {\n  }\n\n  handleFileInput(file: any) {\n    const formData = new FormData()\n    formData.append('image', file.files[0], file.files[0].name)\n    this.apiService.post('file/upload-image', formData).subscribe((response: any) => {\n      \n    })\n  }\n  handleFile() {\n    const formData: FormData = new FormData()\n    formData.append('file', this.fileInput.nativeElement.files[0], this.fileInput.nativeElement.files[0].name)    \n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  initModal() {\n    this.modalService.toggleModal(this.modal, 'open')\n  }\n\n  destroyModal() {\n    this.modalService.toggleModal(this.modal, 'close')\n  }\n\n\n  submitModal(form: NgForm) {\n    this.modalService.sendData(this.model)\n    form.reset()\n    this.destroyModal()\n  }\n}\n","<div class=\"modal\" #modal>\n    <div class=\"modal-wrapper\">\n        <div (click)=\"destroyModal()\" class=\"modal-close\">&times;</div>\n        <form #myForm=\"ngForm\" class=\"modal-form\">\n            <div class=\"modal-file-input\">\n                <input type=\"file\" (change)=\"handleFileInput($event.target)\" #file>\n            </div>\n            <div class=\"modal-input\">\n                <input name=\"name\" [(ngModel)]=\"model.name\" type=\"text\">\n            </div>\n            <div class=\"modal-input\">\n                <input name=\"name\" [(ngModel)]=\"model.age\" type=\"text\">\n            </div>\n            <div class=\"modal-button\">\n                <button (click)=\"submitModal(myForm)\" type=\"submit\">Submit</button>\n            </div>\n        </form>\n    </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}