{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/modal.service\";\nimport * as i2 from \"src/app/services/api.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../shared/button/button.component\";\nimport * as i5 from \"../shared/modal/modal.component\";\nimport * as i6 from \"@angular/router\";\nimport * as i7 from \"./item-cart/item-cart.component\";\nimport * as i8 from \"./news-item/news-item.component\";\nconst _c0 = [\"modal\"];\nconst _c1 = function (a1) {\n  return [\"/album\", a1];\n};\nfunction EntryComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-item-cart\", 16);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(3, _c1, item_r3.id))(\"imageSrc\", item_r3.image_link)(\"description\", item_r3.description);\n  }\n}\nfunction EntryComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-news-item\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"title\", item_r4.title);\n  }\n}\nexport class EntryComponent {\n  constructor(modalService, apiService) {\n    this.modalService = modalService;\n    this.apiService = apiService;\n    this.data = [];\n    this.offset = 4;\n    this.loading = false;\n    this.news = [{\n      title: 'Test title 1'\n    }, {\n      title: 'Test title 2'\n    }, {\n      title: 'Test title 3'\n    }, {\n      title: 'Test title 4'\n    }, {\n      title: 'Test title 5'\n    }, {\n      title: 'Test title 6'\n    }, {\n      title: 'Test title 7'\n    }, {\n      title: 'Test title 8'\n    }];\n  }\n  ngOnInit() {\n    this.apiService.get('album/list', {\n      limit: 4,\n      offset: 0\n    }).subscribe(data => {\n      this.data = data;\n    });\n  }\n  clickBtn() {\n    this.modal.initModal();\n    this.modalService.data$.subscribe(data => {\n      console.log(data);\n    });\n  }\n  showMore() {\n    this.loading = true;\n    this.apiService.get('album/list', {\n      limit: 4,\n      offset: this.offset\n    }).subscribe(data => {\n      // console.log(data);\n      this.data = this.data.concat(data);\n      this.loading = false;\n      this.offset += 4;\n    });\n  }\n}\nEntryComponent.ɵfac = function EntryComponent_Factory(t) {\n  return new (t || EntryComponent)(i0.ɵɵdirectiveInject(i1.ModalService), i0.ɵɵdirectiveInject(i2.ApiService));\n};\nEntryComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EntryComponent,\n  selectors: [[\"app-entry\"]],\n  viewQuery: function EntryComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modal = _t.first);\n    }\n  },\n  decls: 20,\n  vars: 5,\n  consts: [[1, \"entry-wrapper\"], [1, \"now\"], [1, \"now-title\"], [1, \"now-content\"], [4, \"ngFor\", \"ngForOf\"], [1, \"now-show-more\"], [3, \"loading\", \"text\", \"click\"], [1, \"news\"], [1, \"news-title\"], [1, \"news-content\"], [1, \"vote\"], [1, \"vote-content\"], [1, \"vote-inner\"], [1, \"vote-card\"], [3, \"text\", \"click\"], [\"modal\", \"\"], [3, \"routerLink\", \"imageSrc\", \"description\"], [3, \"title\"]],\n  template: function EntryComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"section\", 1)(2, \"div\", 2);\n      i0.ɵɵtext(3, \"\\u041F\\u043E\\u0441\\u043B\\u0443\\u0448\\u0430\\u0439 \\u0441\\u0435\\u0433\\u043E\\u0434\\u043D\\u044F\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 3);\n      i0.ɵɵtemplate(5, EntryComponent_div_5_Template, 2, 5, \"div\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 5)(7, \"app-button\", 6);\n      i0.ɵɵlistener(\"click\", function EntryComponent_Template_app_button_click_7_listener() {\n        return ctx.showMore();\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(8, \"section\", 7)(9, \"div\", 8);\n      i0.ɵɵtext(10, \"\\u0410\\u043A\\u0442\\u0443\\u0430\\u043B\\u044C\\u043D\\u044B\\u0435 \\u043D\\u043E\\u0432\\u043E\\u0441\\u0442\\u0438 \\u0438\\u0437 \\u043C\\u0438\\u0440\\u0430 \\u0442\\u044F\\u0436\\u0435\\u043B\\u043E\\u0439 \\u043C\\u0443\\u0437\\u044B\\u043A\\u0438\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"div\", 9);\n      i0.ɵɵtemplate(12, EntryComponent_div_12_Template, 2, 1, \"div\", 4);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(13, \"section\", 10)(14, \"div\", 11)(15, \"div\", 12);\n      i0.ɵɵelement(16, \"div\", 13);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(17, \"app-button\", 14);\n      i0.ɵɵlistener(\"click\", function EntryComponent_Template_app_button_click_17_listener() {\n        return ctx.clickBtn();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(18, \"app-modal\", null, 15);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.data);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"loading\", ctx.loading)(\"text\", \"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C \\u0435\\u0449\\u0435\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.news);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"text\", \"Modal\");\n    }\n  },\n  dependencies: [i3.NgForOf, i4.ButtonComponent, i5.ModalComponent, i6.RouterLink, i7.ItemCartComponent, i8.NewsItemComponent],\n  styles: [\"[_nghost-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  \\n}\\n\\n.banner[_ngcontent-%COMP%] {\\n  display: flex;\\n}\\n\\n.banner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\\n\\n.entry-wrapper[_ngcontent-%COMP%] {\\n  max-width: 1400px;\\n  padding: 0 30px;\\n}\\n\\n.now[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  margin-bottom: 100px;\\n}\\n\\n.now-title[_ngcontent-%COMP%] {\\n  text-align: center;\\n  -webkit-text-stroke: 1px #000000;\\n  font-size: 64px;\\n  padding: 80px 0;\\n}\\n\\n.now-content[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  gap: 40px;\\n  flex-wrap: wrap;\\n}\\n\\n.news[_ngcontent-%COMP%] {\\n  display: flex;\\n  \\n  justify-content: center;\\n  flex-direction: column;\\n}\\n\\n.news-title[_ngcontent-%COMP%] {\\n  text-align: center;\\n  -webkit-text-stroke: 1px #000000;\\n  font-size: 64px;\\n  padding: 80px 0;\\n}\\n\\n.news-content[_ngcontent-%COMP%] {\\n  display: flex;\\n  \\n  align-items: center;\\n  justify-content: center;\\n  gap: 40px;\\n  flex-wrap: wrap;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9lbnRyeS9lbnRyeS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGFBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0VBQ0EsdUJBQUE7QUFDSjs7QUFFQTtFQUNJLGFBQUE7QUFDSjs7QUFDQTtFQUNJLFdBQUE7QUFFSjs7QUFDQTtFQUNJLGlCQUFBO0VBQ0EsZUFBQTtBQUVKOztBQUNBO0VBQ0ksYUFBQTtFQUNBLHNCQUFBO0VBQ0EsbUJBQUE7RUFDQSx1QkFBQTtFQUNBLG9CQUFBO0FBRUo7O0FBQUE7RUFDSSxrQkFBQTtFQUNBLGdDQUFBO0VBQ0EsZUFBQTtFQUNBLGVBQUE7QUFHSjs7QUFEQTtFQUNJLGFBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0VBQ0EsU0FBQTtFQUNBLGVBQUE7QUFJSjs7QUFEQTtFQUNJLGFBQUE7RUFDQSx5QkFBQTtFQUNBLHVCQUFBO0VBQ0Esc0JBQUE7QUFJSjs7QUFGQTtFQUNJLGtCQUFBO0VBQ0EsZ0NBQUE7RUFDQSxlQUFBO0VBQ0EsZUFBQTtBQUtKOztBQUhBO0VBQ0ksYUFBQTtFQUNBLDRCQUFBO0VBQ0EsbUJBQUE7RUFDQSx1QkFBQTtFQUNBLFNBQUE7RUFDQSxlQUFBO0FBTUoiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIC8qIG1heC13aWR0aDogMTQwMHB4OyAqL1xufVxuXG4uYmFubmVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xufVxuLmJhbm5lciBpbWcge1xuICAgIHdpZHRoOiAxMDAlO1xufVxuXG4uZW50cnktd3JhcHBlciB7XG4gICAgbWF4LXdpZHRoOiAxNDAwcHg7XG4gICAgcGFkZGluZzogMCAzMHB4O1xufVxuXG4ubm93IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBtYXJnaW4tYm90dG9tOiAxMDBweDtcbn1cbi5ub3ctdGl0bGUge1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAtd2Via2l0LXRleHQtc3Ryb2tlOiAxcHggIzAwMDAwMDtcbiAgICBmb250LXNpemU6IDY0cHg7XG4gICAgcGFkZGluZzogODBweCAwO1xufVxuLm5vdy1jb250ZW50IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgZ2FwOiA0MHB4O1xuICAgIGZsZXgtd3JhcDogd3JhcDtcbn1cblxuLm5ld3Mge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgLyogYWxpZ24taXRlbXM6IGNlbnRlcjsgKi9cbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xufVxuLm5ld3MtdGl0bGUge1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAtd2Via2l0LXRleHQtc3Ryb2tlOiAxcHggIzAwMDAwMDtcbiAgICBmb250LXNpemU6IDY0cHg7XG4gICAgcGFkZGluZzogODBweCAwO1xufVxuLm5ld3MtY29udGVudCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICAvKiBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyAqL1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgZ2FwOiA0MHB4O1xuICAgIGZsZXgtd3JhcDogd3JhcDtcbn1cblxuXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":";;;;;;;;;;;;;;;IAIYA,2BAA+B;IAC3BA,oCAAgI;IACpIA,iBAAM;;;;IADaA,eAAkC;IAAlCA,mEAAkC;;;;;IAUrDA,2BAA+B;IAC3BA,oCAAoD;IACxDA,iBAAM;;;;IADaA,eAAoB;IAApBA,qCAAoB;;;ACJnD,OAAM,MAAOC,cAAc;EAmCzBC,YACUC,YAA0B,EAC1BC,UAAsB;IADtB,iBAAY,GAAZD,YAAY;IACZ,eAAU,GAAVC,UAAU;IAhCb,SAAI,GAAe,EAAE;IACrB,WAAM,GAAW,CAAC;IAClB,YAAO,GAAY,KAAK;IACxB,SAAI,GAAQ,CACjB;MACEC,KAAK,EAAE;KACR,EACD;MACEA,KAAK,EAAE;KACR,EACD;MACEA,KAAK,EAAE;KACR,EACD;MACEA,KAAK,EAAE;KACR,EACD;MACEA,KAAK,EAAE;KACR,EACD;MACEA,KAAK,EAAE;KACR,EACD;MACEA,KAAK,EAAE;KACR,EACD;MACEA,KAAK,EAAE;KACR,CACF;EAMD;EAEAC,QAAQ;IACN,IAAI,CAACF,UAAU,CAACG,GAAG,CAAC,YAAY,EAAE;MAACC,KAAK,EAAE,CAAC;MAAEC,MAAM,EAAE;IAAC,CAAC,CAAC,CAACC,SAAS,CAAEC,IAAS,IAAI;MAC/E,IAAI,CAACA,IAAI,GAAGA,IAAI;IAClB,CAAC,CAAC;EACJ;EAEAC,QAAQ;IACN,IAAI,CAACC,KAAK,CAACC,SAAS,EAAE;IACtB,IAAI,CAACX,YAAY,CAACY,KAAK,CAACL,SAAS,CAAEC,IAAS,IAAI;MAC9CK,OAAO,CAACC,GAAG,CAACN,IAAI,CAAC;IACnB,CAAC,CAAC;EACJ;EAEAO,QAAQ;IACN,IAAI,CAACC,OAAO,GAAG,IAAI;IACnB,IAAI,CAACf,UAAU,CAACG,GAAG,CAAC,YAAY,EAAE;MAACC,KAAK,EAAE,CAAC;MAAEC,MAAM,EAAE,IAAI,CAACA;IAAM,CAAC,CAAC,CAACC,SAAS,CAAEC,IAAS,IAAI;MACzF;MACA,IAAI,CAACA,IAAI,GAAG,IAAI,CAACA,IAAI,CAACS,MAAM,CAACT,IAAI,CAAC;MAClC,IAAI,CAACQ,OAAO,GAAG,KAAK;MACpB,IAAI,CAACV,MAAM,IAAI,CAAC;IAClB,CAAC,CAAC;EACJ;;AA9DWR,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;QAAdA,cAAc;EAAAoB;EAAAC;IAAA;;;;;;;;;;;;;MDZ3BtB,8BAA2B;MAEIA,2GAAgB;MAAAA,iBAAM;MAC7CA,8BAAyB;MACrBA,+DAEM;MACVA,iBAAM;MACNA,8BAA2B;MACSA;QAAA,OAASuB,cAAU;MAAA,EAAC;MAAyBvB,iBAAa;MAGlGA,kCAAsB;MACMA,8OAAyC;MAAAA,iBAAM;MACvEA,+BAA0B;MACtBA,iEAEM;MACVA,iBAAM;MAGVA,oCAAsB;MAGVA,2BAA6B;MACjCA,iBAAM;MAIdA,uCAAkD;MAArBA;QAAA,OAASuB,cAAU;MAAA,EAAC;MAACvB,iBAAa;MAC/DA,uCAA8B;MAClCA,iBAAM;;;MA3B4BA,eAAO;MAAPA,kCAAO;MAKjBA,eAAmB;MAAnBA,qCAAmB;MAMTA,eAAO;MAAPA,kCAAO;MAczBA,eAAgB;MAAhBA,8BAAgB","names":["i0","EntryComponent","constructor","modalService","apiService","title","ngOnInit","get","limit","offset","subscribe","data","clickBtn","modal","initModal","data$","console","log","showMore","loading","concat","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["/home/dima/myProjects/heavyReviewBackEnd/web/ng2app/src/app/components/entry/entry.component.html","/home/dima/myProjects/heavyReviewBackEnd/web/ng2app/src/app/components/entry/entry.component.ts"],"sourcesContent":["<div class=\"entry-wrapper\">\n    <section class=\"now\">\n        <div class=\"now-title\">Послушай сегодня</div>\n        <div class=\"now-content\">\n            <div *ngFor=\"let item of data\">\n                <app-item-cart [routerLink]=\"['/album', item.id]\" [imageSrc]=\"item.image_link\" [description]=\"item.description\"></app-item-cart>\n            </div>\n        </div>\n        <div class=\"now-show-more\">\n            <app-button [loading]=\"loading\" (click)=\"showMore()\" [text]=\"'Показать еще'\"></app-button>\n        </div>\n    </section>\n    <section class=\"news\">\n        <div class=\"news-title\">Актуальные новости из мира тяжелой музыки</div>\n        <div class=\"news-content\">\n            <div *ngFor=\"let item of news\">\n                <app-news-item [title]=\"item.title\"></app-news-item>\n            </div>\n        </div>\n    </section>\n\n    <section class=\"vote\">\n        <div class=\"vote-content\">\n            <div class=\"vote-inner\">\n                <div class=\"vote-card\"></div>\n            </div>\n        </div>\n    </section>\n\n    <app-button [text]=\"'Modal'\" (click)=\"clickBtn()\"></app-button>\n    <app-modal #modal></app-modal>\n</div>","import { Component, ViewChild } from '@angular/core';\nimport { ModalService } from 'src/app/services/modal.service';\nimport { ModalComponent } from '../shared/modal/modal.component';\nimport { ApiService } from 'src/app/services/api.service';\nimport { Observable, Subscription, concatMap, first, take } from 'rxjs';\nimport { HeaderComponent } from '../header/header.component';\n\n@Component({\n  selector: 'app-entry',\n  templateUrl: './entry.component.html',\n  styleUrls: ['./entry.component.scss']\n})\nexport class EntryComponent {\n\n  @ViewChild('modal') modal!: ModalComponent;\n\n  public description!: string;\n  public data: Array<any> = [];\n  public offset: number = 4;\n  public loading: boolean = false\n  public news: any = [\n    {\n      title: 'Test title 1'\n    },\n    {\n      title: 'Test title 2'\n    },\n    {\n      title: 'Test title 3'\n    },\n    {\n      title: 'Test title 4'\n    },\n    {\n      title: 'Test title 5'\n    },\n    {\n      title: 'Test title 6'\n    },\n    {\n      title: 'Test title 7'\n    },\n    {\n      title: 'Test title 8'\n    },\n  ]\n\n  constructor(\n    private modalService: ModalService,\n    private apiService: ApiService,\n    ) {\n  }\n  \n  ngOnInit(): void {\n    this.apiService.get('album/list', {limit: 4, offset: 0}).subscribe((data: any) => {\n      this.data = data\n    })\n  }\n\n  clickBtn() {\n    this.modal.initModal();\n    this.modalService.data$.subscribe((data: any) => {\n      console.log(data);\n    })\n  }\n\n  showMore() {\n    this.loading = true\n    this.apiService.get('album/list', {limit: 4, offset: this.offset}).subscribe((data: any) => {\n      // console.log(data);\n      this.data = this.data.concat(data)\n      this.loading = false\n      this.offset += 4;\n    })\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}